{"version":3,"file":"bundle.js","sources":["../src/update.js","../src/main.js"],"sourcesContent":["var span = document.querySelector('#time-now');\n\nexport default function update() {\n\twindow.onbeforeunload = function() {\n\t\twindow.scrollTo(0, 0);\n\t};\n\t\n\tvar colors = [\n\t\t\"#feedde\",\n\t\t\"#fdbe85\",\n\t\t\"#fd8d3c\",\n\t\t\"#e6550d\",\n\t\t\"#a63603\",\n\t\t\"#feedde\",\n\t\t\"#fdbe85\",\n\t\t\"#fd8d3c\",\n\t\t\"#e6550d\",\n\t\t\"#feedde\",\n\t\t\"#fdbe85\",\n\t\t\"#fd8d3c\",\n\t\t\"#e6550d\",\n\t\t\"#a63603\"\n\t];\n\t\n\t// initialize the scrollama\n\tvar scroller = scrollama();\n\t\n\t// Setup sizes for the graphic and steps \n\tvar container = d3.select(\".scroll\");\n\tvar graphic = container.select(\".scroll__graphic\");\n\tvar text = container.select(\".scroll__text\");\n\t\n\tvar bodyWidth = d3.select(\"body\").node().offsetWidth;\n\tvar textWidth = text.node().offsetWidth;\n\t\n\tvar step = text.selectAll(\".step\");\n\tvar stepHeight = Math.floor(window.innerHeight * 0.75);\n\t\n\tvar graphicMargin = 16 * 4; // 64px\n\tvar graphicWidth = container.node().offsetWidth - graphicMargin;\n\tconst mapwidth = container.node().offsetWidth;\n\tconst graphicHeight = graphicWidth;\n\t// var graphicHeight = Math.floor(window.innerHeight / 2.4);\n\tconsole.warn({ graphicHeight });\n\t\n\tvar graphicMarginTop = Math.floor(window.innerHeight * 0.25);\n\t// graphicMargin / 2;\n\t\n\tstep.style(\"height\", window.innerHeight+\"px\");\n\t\n\tgraphic\n\t\t.style(\"width\", mapwidth + \"px\")\n\t\t.style(\"height\", mapwidth + \"px\")\n\t\t.style(\"top\", graphicMarginTop + \"px\");\n\t// -----------------------------------\n\tconsole.warn({ graphicHeight });\n\tconsole.warn({ graphicWidth });\n\tconsole.warn({ stepHeight });\n\tconsole.warn('container.node().offsetHeight', container.node().offsetHeight)\n\td3.select(\".header-container\").style(\"height\", 850 + \"px\")\n\t\n\td3.select(\".ussr-svg-container\").style(\"width\", graphicWidth + \"px\")\n\td3.select(\".intro-block\").style(\"width\", graphicWidth + \"px\")\n\td3.select(\".name-block\").style(\"width\", graphicWidth + \"px\")\n\t\n\td3.select(\".ussr-svg\").style(\"height\", 200 + \"px\")\n\td3.select(\".ussr-svg\").style(\"width\", 200 + \"px\")\n\t// Animations \n\t\n\tfunction firstAnimation() {\n\t\tvar scale = 2;\n\t\n\t\tconsole.warn(\"scroll container size\", graphic.node().getBoundingClientRect());\n\t\n\t\tvar translateX = -Math.floor(graphicWidth * 0.75);\n\t\tvar translateY = -Math.floor(graphicHeight * 0.45);\n\t\n\t\tconsole.warn({ scale });\n\t\tconsole.warn({ width });\n\t\tconsole.warn({ height });\n\t\tconsole.warn({ translateX });\n\t\tconsole.warn({ translateY });\n\t\n\t\td3.select(\"#map\")\n\t\t\t.transition()\n\t\t\t.duration(1000)\n\t\t\t.attr(\n\t\t\t\t\"transform\",\n\t\t\t\t\"translate(\" +\n\t\t\t\t\twidth / 2 +\n\t\t\t\t\t\",\" +\n\t\t\t\t\theight / 2 +\n\t\t\t\t\t\")scale(\" +\n\t\t\t\t\tscale +\n\t\t\t\t\t\")translate(\" +\n\t\t\t\t\ttranslateX +\n\t\t\t\t\t\",\" +\n\t\t\t\t\ttranslateY +\n\t\t\t\t\t\")\"\n\t\t\t);\n\t\n\t\t// d3.selectAll(\".soviet-country\")\n\t\t//   .transition()\n\t\t//   .duration(100)\n\t\t//   .style(\"fill\", \"#a63603\")\n\t\t//   .style(\"stroke-width\", 0.5 + \"px\");\n\t\n\t\td3.selectAll(\".non-soviet-country\")\n\t\t\t.transition()\n\t\t\t.duration(100)\n\t\t\t.style(\"opacity\", \"0.5\")\n\t\t\t.style(\"stroke-width\", 0.25 + \"px\");\n\t\n\t\t\td3.selectAll(\".soviet-country\")\n\t\t\t.transition()\n\t\t\t.duration(1000)\n\t\t\t.style(\"fill\", function(d, i) {\n\t\t\t\t// console.warn('i', i)\n\t\t\t\treturn colors[i];\n\t\t\t});\n\t}\n\t\n\tfunction secondAnimation() {\n\t\tvar scale = 4;\n\t\tvar translateX = -Math.floor(graphicWidth * 0.7);\n\t\tvar translateY = -Math.floor(graphicHeight * 0.4);\n\t\n\t\td3.select(\"#map\")\n\t\t\t.transition()\n\t\t\t.duration(1000)\n\t\t\t.attr(\n\t\t\t\t\"transform\",\n\t\t\t\t\"translate(\" +\n\t\t\t\t\twidth / 2 +\n\t\t\t\t\t\",\" +\n\t\t\t\t\theight / 2 +\n\t\t\t\t\t\")scale(\" +\n\t\t\t\t\tscale +\n\t\t\t\t\t\")translate(\" +\n\t\t\t\t\ttranslateX +\n\t\t\t\t\t\",\" +\n\t\t\t\t\ttranslateY +\n\t\t\t\t\t\")\"\n\t\t\t);\n\t\n\t\td3.selectAll(\".non-soviet-country\")\n\t\t\t.transition()\n\t\t\t.duration(500)\n\t\t\t.style(\"stroke-width\", 0.175 + \"px\");\n\t\n\t\td3.selectAll(\".soviet-country\")\n\t\t\t.transition()\n\t\t\t.duration(500)\n\t\t\t.style(\"stroke-width\", 0.25 + \"px\");\n\t\n\t\tfourthAnimation()\n\t\n\t}\n\t\n\tfunction thirdAnimation() {\n\t\n\t}\n\t\n\tvar sovietLabelShift = {\n\t\t'ARM': {x: -12, y: 2}, \n\t\t'AZE': {x: -8, y: 5}, \n\t\t'BLR': {x: -14, y: 4}, \n\t\t'EST': {x: -12, y: 0}, \n\t\t'GEO': {x: -13, y: 1}, \n\t\t'KAZ': {x: 14, y: 6}, \n\t\t'KGZ': {x: 5, y: 3}, \n\t\t'LVA': {x: -12, y: 0}, \n\t\t'LTU': {x: -14, y: 0}, \n\t\t'MDA': {x: -12, y: 1}, \n\t\t'RUS': {x: -40, y: 10}, \n\t\t'TJK': {x: -4, y: 6}, \n\t\t'TKM': {x: -10, y: 8}, \n\t\t'UKR': {x: -9, y: 7}, \n\t\t'UZB': {x: -12, y: 0}\n\t}\n\t\n\tfunction fourthAnimation() {\n\t\tconsole.log(\"map\", map);\n\t\tconsole.warn(\"worldGeoJson\", worldGeoJson);\n\t\tconsole.warn(\"path\", path);\n\t\n\t\td3.selectAll(\".non-soviet-country\")\n\t\t\t.transition()\n\t\t\t.duration(500)\n\t\t\t.style(\"opacity\", \"0\")\n\t\n\t\tmap.selectAll(\".place-label\")\n\t\t\t.data(topojson.feature(worldGeoJson, worldGeoJson.objects.subunits).features)\n\t\t\t.enter().append(\"text\")\n\t\t\t.attr(\"class\", \"place-label\")\n\t\t\t.attr(\"transform\", function(d) { \n\t\t\t\t\t// can get centroid easily like this!  path.centroid(d)\n\t\t\t\tconst [x, y] = path.centroid(d)\n\t\t\t\treturn `translate(${x},${y})`; \n\t\t\t})\n\t\t\t.attr(\"dx\", function({id}) { \n\t\t\t\tif (sovietCountryIsoCodes.includes(id)) {\n\t\t\t\t\tconst { x } = sovietLabelShift[id]\n\t\t\t\t\tconsole.warn(x)\n\t\t\t\t\t// can get centroid easily like this!  path.centroid(d)\n\t\t\t\t\treturn `${x}px`; \n\t\t\t\t} \n\t\t\t\treturn\n\t\t\t})\n\t\t\t.attr(\"dy\", function(d) { \n\t\t\t\tif (sovietCountryIsoCodes.includes(d.id)) {\n\t\n\t\t\t\tconst name = d.id\n\t\t\t\tconst { y } = sovietLabelShift[name]\n\t\t\t\t\t// can get centroid easily like this!  path.centroid(d)\n\t\t\t\treturn `${y}px`; \n\t\t\t\t}\n\t\t\t\treturn\n\t\t\t})\n\t\t\t// .style(\"z-index\", '100')\n\t\t\t.text(function(d) { \n\t\t\t\tif (sovietCountryIsoCodes.includes(d.id)) {\n\t\t\t\t\tconsole.warn('soviet datapoint', d)\n\t\t\t\t\treturn d.properties.name; \n\t\t\t\t}\n\t\n\t\t\t\treturn null;\n\t\t\t}).style(\"font-size\", 3 +\"px\")\n\t}\n\t\n\t// scrollama event handlers\n\tfunction handleStepEnter(response) {\n\t\tconsole.warn(\"handleStepEnter\", { response });\n\t\tconsole.warn(\"handleStepEnter step index: response.index\", response.index);\n\t\tif (response.index === 0) {\n\t\t\tconsole.warn(\"FIRST STEP!\");\n\t\t\tfirstAnimation();\n\t\t}\n\t\n\t\tif (response.index === 1) {\n\t\t\tconsole.warn(\"SECOND STEP!\");\n\t\t\tsecondAnimation();\n\t\t}\n\t\n\t\tif (response.index === 2) {\n\t\t\tconsole.warn(\"THIRD STEP!\");\n\t\t\tthirdAnimation();\n\t\t}\n\t\n\t\tif (response.index === 3) {\n\t\t\tconsole.warn(\"FOURTH STEP!\");\n\t\t\tfourthAnimation();\n\t\t}\n\t\t// response = { element, direction, index }\n\t\t// add color to current step only\n\t\tstep.classed(\"is-active\", function(d, i) {\n\t\t\treturn i === response.index;\n\t\t});\n\t\n\t\t// update graphic based on step\n\t\tgraphic.select(\"p\").text(response.index + 1);\n\t}\n\t\n\tfunction handleContainerEnter(response) {\n\t\td3.select(\".intro__overline\").classed(\"sticky_break\", true);\n\t\tconsole.warn({ handleContainerEnter });\n\t\t// response = { direction }\n\t}\n\t\n\tfunction handleContainerExit(response) {\n\t\tconsole.warn({ handleContainerExit });\n\t\t// response = { direction }\n\t}\n\t\n\tfunction setupStickyfill() {\n\t\td3.selectAll(\".sticky\").each(function() {\n\t\t\tStickyfill.add(this);\n\t\t});\n\t}\n\t\n\tfunction init() {\n\t\tsetupStickyfill();\n\t\tscroller\n\t\t\t.setup({\n\t\t\t\tcontainer: \".scroll\",\n\t\t\t\tgraphic: \".scroll__graphic\",\n\t\t\t\ttext: \".scroll__text\",\n\t\t\t\tstep: \".scroll__text .step\",\n\t\t\t\tdebug: false,\n\t\t\t\toffset: 0.9\n\t\t\t})\n\t\t\t.onStepEnter(handleStepEnter)\n\t\t\t.onContainerEnter(handleContainerEnter)\n\t\t\t.onContainerExit(handleContainerExit);\n\t\n\t\t// setup resize event -> this is causing issues in mobile when the mobile headers resize\n\t\t// window.addEventListener(\"resize\", handleResize);\n\t}\n\t\n\t// kick things off\n\tinit();\n\t// initializeD3()\n\tvar sovietCountryIsoCodes = [ 'ARM', 'AZE', 'BLR', 'EST', 'GEO', 'KAZ', 'KGZ', 'LVA', 'LTU', 'MDA', 'RUS', 'TJK', 'TKM', 'UKR', 'UZB']\nvar rotate = -20;        // so that [-60, 0] becomes initial center of projection\nvar maxlat = 83;\nvar centered;\n\nvar mercatorBounds = function (projection, maxlat) {\n  var yaw = projection.rotate()[0],\n      xymax = projection([-yaw+180-1e-6,-maxlat]),\n      xymin = projection([-yaw-180+1e-6, maxlat]);\n  \n  return [xymin,xymax];\n}\n\nvar graphicContainer = d3.select(\".scroll__graphic\");\nvar graphicContainerSize = graphicContainer.node().getBoundingClientRect()\nvar width = graphicContainerSize.width\nvar height = graphicContainerSize.height\n\nvar projection = d3.geo.mercator()\n  .rotate([rotate,0])\n  .scale(1) // we'll scale up to match viewport shortly.\n  .translate([width/2, height/2])\n  // .center([0, 25])\n\n// find the top left and bottom right of current projection\n// set up the scale extent and initial scale for the projection\nvar b = mercatorBounds(projection, maxlat)\nvar s = width/(b[1][0]-b[0][0])\nvar scaleExtent = [s, 10*s];\n\nprojection.scale(scaleExtent[0]);\n\nvar path = d3.geo.path().projection(projection);\n\nvar worldGeoJson;\nvar svg\nvar map\n\nd3.json(\"./json/110topoworld.json\", function(json) {\n  console.warn('loaded 110topoworld.json:', json)\n\n  worldGeoJson = json\n\n  var countrySubunits = topojson.feature(json, json.objects.subunits).features\n\n  svg = d3\n    .select(\".scroll__graphic\")\n    .append(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height)\n\n    map = svg\n    .append(\"g\")\n    .attr(\"id\", \"map\");\n\n  map\n    .selectAll(\"path\")\n    .data(topojson.feature(json, json.objects.subunits).features)\n    .enter()\n    .append(\"path\")\n    .attr(\"d\", path)\n    .style(\"stroke-width\", 0.5 + \"px\")\n    .attr(\"class\", \"country\")\n    .attr(\"id\", function(d, i) {\n      return \"country\" + d.id;\n    })\n    .attr('class', function(datapoint, i){\n      if (sovietCountryIsoCodes.includes(datapoint.id)) {\n        return \"country soviet-country\"\n      } else {\n        return \"country non-soviet-country\"\n      }\n    })\n\n    // d3.selectAll(\".soviet-country\")\n    // .transition()\n    // .duration(100)\n    // .style(\"fill\", \"#a63603\")\n    // .style(\"stroke-width\", 0.5 + \"px\");\n});\n\n\n\t\n\t\n}\n","import update from './update.js';\n\n// even though Rollup is bundling all your files together, errors and\n// logs will still point to your original source modules\nconsole.log('if you have sourcemaps enabled in your devtools, click on main.js:5 -->');\n\nupdate();"],"names":["span","document","querySelector","update","window","onbeforeunload","scrollTo","colors","scroller","scrollama","container","d3","select","graphic","text","bodyWidth","node","offsetWidth","textWidth","step","selectAll","stepHeight","Math","floor","innerHeight","graphicMargin","graphicWidth","mapwidth","graphicHeight","console","warn","graphicMarginTop","style","offsetHeight","firstAnimation","scale","getBoundingClientRect","translateX","translateY","width","height","transition","duration","attr","d","i","secondAnimation","fourthAnimation","sovietLabelShift","x","y","log","map","worldGeoJson","path","data","topojson","feature","objects","subunits","features","enter","append","centroid","id","sovietCountryIsoCodes","includes","name","properties","handleStepEnter","response","index","thirdAnimation","classed","handleContainerEnter","handleContainerExit","setupStickyfill","each","Stickyfill","add","init","setup","debug","offset","onStepEnter","onContainerEnter","onContainerExit","rotate","maxlat","mercatorBounds","projection","yaw","xymax","xymin","graphicContainer","graphicContainerSize","geo","mercator","translate","b","s","scaleExtent","svg","json","countrySubunits","datapoint"],"mappings":"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"}