
<html>
  <head>
    <title>A D3 chart</title>
    <script src="https://d3js.org/d3.v4.min.js"></script>
  </head>
  <body>

  <svg width="100" height="150">
    <rect x="0" width="15" fill="#d1c9b8"></rect>
    <rect x="25" width="15" fill="#d1c9b8"></rect>
    <rect x="50" width="15" fill="#d1c9b8"></rect>
    <rect x="75" width="15" fill="#d1c9b8"></rect>
  </svg>
        
    
    <script>
      var ratData = [400, 900, 300, 600, 900];

      d3.selectAll('rect')
        .data(ratData)
        .attr('height', function(d){
          return d/10 * 1.5;
        })
        .attr('y', function(d){
          return 150 - d/10 * 1.5;
        });

      var svg = d3.select('body')
        .append('svg')
          .attr('width', 500)
          .attr('height', 150);

      svg.selectAll('rect')
        .data(ratData)
        .enter()
        .append('rect')
          .attr('x', function(d, i){
            return i * 25;
          })
          .attr('width', 15)
          .attr('fill', '#d1c9b8')
          .attr('height', function(d){
            return d/10 * 1.5;
          })
          .attr('y', function(d){
            return 150 - d/10 * 1.5;
          });

      var newData = [800, 200, 400, 500, 100];
        var selection = svg.selectAll('rect')
                          .data(newData);
        // selection has four rect elements and five data points

        // this part will only happen for the new fifth bar                  
 

      selection.enter()  // the ENTER selection
        .append('rect')
        .attr('x', function(d, i){
          return i * 25;
        })
        .attr('width', 15)
        .attr('fill', '#d1c9b8')
        .merge(selection)  // ENTER + UPDATE selections
        // everything below now happens to all five bars
        .attr('height', function(d){
          return d/10 * 1.5;
        })
      
    // our code will go here
    </script>

  </body>
  </html>